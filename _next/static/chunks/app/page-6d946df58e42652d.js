(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1265:function(e,t,a){Promise.resolve().then(a.bind(a,2065))},2065:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),i=a(2265),n=a(353),r=a(8184),l=e=>{let{children:t,loading:a,size:i=100}=e;return(0,s.jsx)(n.Z,{"data-testid":"loader",indicator:(0,s.jsx)(r.Z,{style:{fontSize:i},spin:!0}),spinning:a,children:t})},c=a(9248),o=e=>{let{onSearch:t}=e;return(0,s.jsx)(c.Z.Search,{placeholder:"Search for your favourite artist...",onSearch:t,allowClear:!0,className:"w-[80%]","data-testid":"search-input"})},d=a(3464),u=(e,t)=>{let[a,s]=(0,i.useState)(),[n,r]=(0,i.useState)(void 0),[l,c]=(0,i.useState)(!1),[o,u]=(0,i.useState)(),p=async()=>{c(!0),u(void 0);try{let{data:t}=await d.Z.get("/api/search-artist",{params:{artist:e}});s(t.id)}catch(e){f(),u(e.response.data.message)}c(!1)},h=async()=>{c(!0);let{data:{releases:e,pagination:s}}=await d.Z.get("/api/get-releases-by-artist",{params:{artistId:a,page:t}});r({releases:e,pagination:s}),c(!1)},f=()=>{s(void 0),r(void 0)};return(0,i.useEffect)(()=>{e&&(f(),p())},[e]),(0,i.useEffect)(()=>{a&&h()},[a,t]),{releases:n,isLoading:l,error:o}},p=a(4814),h=a(1357),f=a(3311),v=a(8389),x=a(7648),m=a(9376),g=()=>{var e,t;let a=(0,m.useRouter)(),n=(0,m.useSearchParams)(),r=null==n?void 0:n.get("artist"),c=null==n?void 0:n.get("page"),[d,g]=(0,i.useState)(r||void 0),[j,w]=(0,i.useState)(c?parseInt(c):void 0),{releases:S,isLoading:N,error:b}=u(d,j);return(0,i.useEffect)(()=>{g(r),w(parseInt(c))},[r,c]),(0,s.jsxs)("div",{className:"flex flex-col py-5 items-center min-w-[250px] text-center",children:[(0,s.jsx)("h1",{className:"font-bold text-2xl mb-5",children:"Search For Your Favourite Artist"}),(0,s.jsx)(o,{onSearch:e=>{e&&(g(e),w(void 0),a.push("/?artist=".concat(encodeURIComponent(e))))}}),(0,s.jsx)(l,{loading:N,children:(0,s.jsxs)(p.Z,{vertical:!0,justify:"space-between",align:"center",className:"m-5",gap:20,children:[(0,s.jsxs)(p.Z,{vertical:!0,justify:"space-between",wrap:!0,className:"sm:flex-row min-h-[600px]",gap:8,children:[b&&(0,s.jsx)("div",{children:b}),null==S?void 0:null===(e=S.releases)||void 0===e?void 0:e.map(e=>(0,s.jsx)(x.default,{href:"/releases/".concat(e.id),className:"h-[250px]",children:(0,s.jsx)(h.Z,{title:e.title,bordered:!1,className:"w-[200px] h-full",children:(0,s.jsx)(f.Z,{src:e.thumb,preview:!1,alt:e.title})})},e.id))]}),(null==S?void 0:null===(t=S.pagination)||void 0===t?void 0:t.pages)&&S.pagination.pages>1&&(0,s.jsx)(v.Z,{"data-testid":"pagination",className:"self-center",current:j,onChange:e=>{w(e),a.push("/?artist=".concat(encodeURIComponent(d),"&page=").concat(e))},total:S.pagination.pages,showSizeChanger:!1})]})})]})}}},function(e){e.O(0,[554,971,117,744],function(){return e(e.s=1265)}),_N_E=e.O()}]);